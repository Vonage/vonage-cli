"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.FileClient = void 0;
const client_1 = require("./client");
const AuthenticationType_1 = require("./enums/AuthenticationType");
const fs_1 = require("fs");
const debug_1 = __importDefault(require("debug"));
const log = (0, debug_1.default)('vonage:server-client');
class FileClient extends client_1.Client {
    authType = AuthenticationType_1.AuthenticationType.JWT;
    async downloadFile(file, path) {
        log(`Downloading file: ${file}`);
        let fileId = file;
        try {
            const fileURL = new URL(file);
            fileId = fileURL.pathname.split('/').pop();
        }
        catch (_) {
            log(`Not a url`);
        }
        log(`File Id ${fileId}`);
        const resp = await this.sendGetRequest(`${this.config.apiHost}/v1/files/${fileId}`);
        log(`Saving to ${path}`);
        (0, fs_1.writeFileSync)(path, resp.data);
        log('File saved');
    }
}
exports.FileClient = FileClient;
//# sourceMappingURL=fileClient.js.map